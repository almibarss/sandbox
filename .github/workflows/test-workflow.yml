---
name: Edited PR (feature)

on:
  pull_request:
    types: [opened,labeled,synchronize]

jobs:
  label:
    name: Verify ITs
    if: github.event.name == 'labeled' && github.event.label.name == "my-label"
    runs-on: ubuntu-latest
    steps:
      - name: Find last IT run
        uses: actions/github-script@v5
        with:
          script: |
            github.rest.issues.removeLabel({
                        issue_number: context.payload.issue.number,
                        owner: context.payload.repository.owner.login,
                        repo: context.payload.repository.name,
                        name: "my-label"
                      });

  label2:
    name: Verify ITs
    if: github.event.name == 'synchronize'
    runs-on: ubuntu-latest
    steps:
      - name: Find last IT run
        uses: actions/github-script@v5
        with:
          script: |
            core.setFailed("Noooo")
